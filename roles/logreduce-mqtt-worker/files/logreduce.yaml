logging:
  loggers:
    logreduce:
      handlers: ['file', 'console']
      level: INFO
      propagate: 0
    gear:
      handlers: ['file', 'console']
      level: WARN
      propagate: 0
    sqlalchemy.engine:
      handlers: ['file', 'console']
      level: WARN
      propagate: 0
  handlers:
    console:
      class: logging.StreamHandler
      formatter: console
      level: INFO
      stream: ext://sys.stdout
    file:
      class: logging.handlers.TimedRotatingFileHandler
      formatter: file
      level: DEBUG
      filename: '/var/log/logreduce/{service}.log'
      when: 'midnight'
      interval: 1
      backupCount: 30
  formatters:
    file:
      format: '%(asctime)s %(levelname)s %(name)s: %(message)s'
    console:
      format: '%(levelname)7s %(name)s: %(message)s'
  root:
    handlers: ['file', 'console']
    level: INFO

server:
  zuul_url: https://softwarefactory-project.io/zuul/api/tenant/rdoproject.org
  models_folder: /var/lib/logreduce/models
  logserver_folder: /var/lib/logreduce/logs
mqtt:
  url: softwarefactory-project.io
  tenants:
    - rdoproject.org
  jobs:
    - ^tripleo-ci-centos-7-ovb-3ctlr_1comp.*$
  model_dest: uploader@logs.rdoproject.org:/var/www/html/review.rdoproject.org/classifiers
  log_dest: uploader@logs.rdoproject.org:/var/www/html/review.rdoproject.org
  rsync: True
filters:
  exclude_lines:
    - "^mistral.* ssh: .*ansible-.* \\[mux\\]$"
    # neutron dhcp interface
    - "^tap[^ ]*$"
    # keepalived
    - "^ *MAC = [a-z0-9:]{17}$"
    # cinder-volumes ids
    - "^ *id = \"[a-zA-Z0-9\\-]{38}\"$"
    # Docker id
    - "^ID. [^ ]+$"
    # Deployment ids
    - "^ *[a-zA-Z0-9]{25}$"
    # Galera ids
    - "^ *[a-z0-9]{8},[0-9]$"
    # pcsd log
    - "^[a-z0-9:]{45}$"
    - "^[a-z0-9:]{54}$"
    # auth token
    - "^OS_AUTH_TOKEN="
    - ".*OS_PASSWORD=[a-zA-Z0-9]+$"
    # docker stats
    - "^[a-z0-9]{12} *[0-9\\.]+% *[0-9\\.]+ *[a-zA-Z]*B / [0-9\\.]+ [a-zA-Z]*B *[0-9\\.]+%"
    # kola id
    - "^\\+\\+ echo [a-zA-Z0-9]{20}$"
    # ironic system log base64 encoded
    - "^.* DEBUG .* Agent command log.collect_system_logs for node .* returned result .u'system_logs'. u'"
    # memcache
    - "^>[0-9]+ sending key [a-z0-9]{40}"
    # cloud init ips
    - "^\\^[+*?-] .* [0-9]+ +[0-9]+ +[0-9]+ .*s$"
  exclude_files:
    - "deployment-hieradata.j2.yaml"
    - "tempest.html"
    - "rabbitmq.config"
    - "influxdb_data"
    - "named.keytab"
  exclude_paths:
    - "logs/quickstart_collect_logs.log"
    - "etc/openstack-dashboard/local_settings"
    - "etc/ipa/"
    - "home/zuul/undercloud-install-"
    - "var/log/pki/pki-ca-spawn"
    - "ipa/master/ooo.test"
    - "pki/pki-tomcat/ca/debug"
    - "var/log/extra/network-bridges"
    - "logs/delorean_logs/"
