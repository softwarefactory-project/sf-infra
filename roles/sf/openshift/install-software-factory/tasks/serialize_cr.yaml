---
- name: Ensure applied CRs location directory
  become: true
  ansible.builtin.file:
    path: "{{ cr_base_path }}"
    state: directory
    mode: "777"

- ansible.builtin.set_fact:
    cr_path: "{{ cr_base_path }}/{{ sf_namespace }}-{{ sf_cluster_name | default('') }}-sf_operator_cr.yaml"

- name: Copy the CR on the filesystem
  become: true
  ansible.builtin.copy:
    content: "{{ sf_manifest }}"
    dest: "{{ cr_path }}"
    mode: "444"
