apiVersion: 1
datasources:
-  access: 'proxy'
   editable: true
   isDefault: true
   name: 'prometheus'
   orgId: 1
   type: 'prometheus'
   url: '{{ prometheus_public_url }}'
   version: 1
{% if vexxhost_prometheus | default(False) %}
- access: proxy
  editable: true
  isDefault: false
  name: prometheus-vexxhost
  orgId: 1
  type: prometheus
  url: '{{ vexxhost_prometheus.url }}'
  basicAuth: true
  basicAuthUser: '{{ vexxhost_prometheus.user }}'
  withCredentials: false
  secureJsonFields:
    basicAuthPassword: "{{ vexxhost_prometheus.password }}"
  readOnly: false
  version: 1
{% endif %}
{% if opensearch_rdo_readonly | default(False) %}
- orgId: 1
  name: opensearch-rdoproject-zuul
  type: grafana-opensearch-datasource
  access: proxy
  url: https://opensearch.rdoproject.org/elasticsearch
  database: '[zuul.rdoproject.org-]YYYY.MM.DD'
  basicAuth: true
  basicAuthUser: "{{ opensearch_rdo_readonly.user }}"
  withCredentials: true
  isDefault: false
  jsonData:
    database: zuul.rdoproject.org-*
    flavor: opensearch
    maxConcurrentShardRequests: 5
    pplEnabled: true
    timeField: '@timestamp'
    version: 2.4.0
  secureJsonFields:
    basicAuthPassword: "{{ opensearch_rdo_readonly.password }}"
  readOnly: false
{% endif %}
