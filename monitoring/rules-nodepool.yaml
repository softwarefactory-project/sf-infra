# Code generated by dhall-to-yaml.  DO NOT EDIT.
groups:
  - name: NodepoolDibImages
    rules:
      - alert: DibImageOutdated
        annotations:
          summary: "Nodepool DIB image {{ $labels.image }} was last built {{ $labels.lasttime }}!"
        expr: "time() - nodepool_dib_image_status_last_build > 172800"
        for: "24h"
        labels:
          severity: warning
      - alert: DibImageBuildFailed
        annotations:
          summary: "DIB image {{ $labels.image }} build failed"
        expr: "nodepool_dib_image_status_rc != 0"
        labels:
          severity: warning
  - name: NodepoolLauncher
    rules:
      - alert: NodepoolNodes
        annotations:
          summary: "Nodepool failed to spawn instance in {{ $labels.provider }}"
        expr: "nodepool_nodes{state='failed'} > 0"
        labels:
          severity: warning
      - alert: NodepoolNodesByLabel
        annotations:
          summary: "Nodepool failed to spawn instance with label {{ $labels.label }}"
        expr: "nodepool_nodes_by_label{state='failed'} > 0"
        labels:
          severity: warning
      - alert: NodepoolNodesByProvider
        annotations:
          summary: "Nodepool failed to spawn instance on provider {{ $labels.provider }}"
        expr: "nodepool_nodes_by_provider{state='failed'} > 0"
        labels:
          severity: warning
      - alert: NodepoolLaunchByProvider
        annotations:
          summary: "Nodepool failed to spawn instance with label {{ $labels.label }} on {{ $labels.provider }}"
        expr: "increase(nodepool_launch_by_provider{result!='ready'}[1m]) > 0"
        labels:
          severity: warning
      - alert: NodepoolLaunchByRequestor
        annotations:
          summary: "Nodepool failed to launch instance for requestor {{ $labels.requestor }}"
        expr: "increase(nodepool_launch_by_requestor{result!='ready'}[1m]) > 0"
        labels:
          severity: warning
      - alert: NodepoolLaunch
        annotations:
          summary: "Nodepool failed to launch instance with error {{ $labels.result }}"
        expr: "increase(nodepool_launch{result!='ready'}[1m]) > 0"
        labels:
          severity: warning
