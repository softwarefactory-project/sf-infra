# Code generated by dhall-to-yaml.  DO NOT EDIT.
groups:
  - name: secrets.rules
    rules:
      - alert: SecretWillExpireInTwoWeeks
        annotations:
          description: "To update the secret:\n\n- k1s_token: Use `uuidgen`.\n- k1s_key, k1s_crt and k1s_chain: Create a new certifcate.\n\nAfter merging the sf-infra change, make sure to restart nodepool-launcher service to update the client.\n\n\nSee the ansible-vault documentation to perform the actual update."
          summary: "Secret {{ $labels.target }} will expire in two weeks"
        expr: "(time() - sf_infra_secret_age_total{name='k1s_*'}) > (63072000 - 1209600)"
        labels:
          severity: warning
      - alert: SecretWillExpireInTwoWeeks
        annotations:
          description: "To update the secret use `uuidgen`.\n\n\nSee the ansible-vault documentation to perform the actual update."
          summary: "Secret {{ $labels.target }} will expire in two weeks"
        expr: "(time() - sf_infra_secret_age_total{name='grafana_pass'}) > (63072000 - 1209600)"
        labels:
          severity: warning
