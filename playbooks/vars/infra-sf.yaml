# Code generated by dhall-to-yaml.  DO NOT EDIT.
image_cache_dir: "{{ ansible_user_dir }}/image_cache"
images:
  - checksum: "520d01c2f2e1ed24cb2f15a4325aa30773930a2961b5484a68cf11b4a415c512"
    container_format: bare
    disk_format: raw
    name: centos-7-1907
    state: present
    url: https://cloud.centos.org/centos/7/images/CentOS-7-x86_64-GenericCloud-1907.qcow2
  - checksum: "68e5d217f8777789cbe5c47cda8776f4acfefa3968b7cef751ba08f651d0cf5a"
    container_format: bare
    disk_format: raw
    name: centos-8-stream
    state: present
    url: https://cloud.centos.org/centos/8-stream/x86_64/images/CentOS-Stream-GenericCloud-8-20201019.1.x86_64.qcow2
  - checksum: "7ec97062618dc0a7ebf211864abf63629da1f325578868579ee70c495bed3ba0"
    container_format: bare
    disk_format: raw
    name: centos-8.3-2011
    state: present
    url: https://cloud.centos.org/centos/8/x86_64/images/CentOS-8-GenericCloud-8.3.2011-20201204.2.x86_64.qcow2
  - checksum: "72b6ae7b4ed09a4dccd6e966e1b3ac69bd97da419de9760b410e837ba00b4e26"
    container_format: bare
    disk_format: raw
    name: fedora-30-1.2
    state: absent
    url: https://download.fedoraproject.org/pub/fedora/linux/releases/30/Cloud/x86_64/images/Fedora-Cloud-Base-30-1.2.x86_64.qcow2
  - checksum: e3c1b309d9203604922d6e255c2c5d098a309c2d46215d8fc026954f3c5c27a0
    container_format: bare
    disk_format: raw
    name: fedora-31-1.9
    state: absent
    url: https://download.fedoraproject.org/pub/fedora/linux/releases/31/Cloud/x86_64/images/Fedora-Cloud-Base-31-1.9.x86_64.qcow2
  - checksum: "7a2b3cc3bb3a92ce927e685d33efe8efd75577efbe207b267cb66f68afae7ce9"
    container_format: bare
    disk_format: raw
    name: fedora-33-1.2
    state: absent
    url: https://download.fedoraproject.org/pub/fedora/linux/releases/33/Cloud/x86_64/images/Fedora-Cloud-Base-33-1.2.x86_64.qcow2
  - checksum: fe84502779b3477284a8d4c86731f642ca10dd3984d2b5eccdf82630a9ca2de6
    container_format: bare
    disk_format: raw
    name: fedora-35-1.2
    state: absent
    url: https://download.fedoraproject.org/pub/fedora/linux/releases/35/Cloud/x86_64/images/Fedora-Cloud-Base-35-1.2.x86_64.qcow2
  - checksum: ca9e514cc2f4a7a0188e7c68af60eb4e573d2e6850cc65b464697223f46b4605
    container_format: bare
    disk_format: raw
    name: fedora-36-1.5
    state: present
    url: https://download.fedoraproject.org/pub/fedora/linux/releases/36/Cloud/x86_64/images/Fedora-Cloud-Base-36-1.5.x86_64.qcow2
  - checksum: b5b9bec91eee65489a5745f6ee620573b23337cbb1eb4501ce200b157a01f3a0
    container_format: bare
    disk_format: raw
    name: fedora-37-1.7
    state: present
    url: https://download.fedoraproject.org/pub/fedora/linux/releases/37/Cloud/x86_64/images/Fedora-Cloud-Base-37-1.7.x86_64.qcow2
  - checksum: d334670401ff3d5b4129fcc662cf64f5a6e568228af59076cc449a4945318482
    container_format: bare
    disk_format: raw
    name: fedora-38-1.6
    state: present
    url: https://download.fedoraproject.org/pub/fedora/linux/releases/38/Cloud/x86_64/images/Fedora-Cloud-Base-38-1.6.x86_64.qcow2
  - checksum: ab5be5058c5c839528a7d6373934e0ce5ad6c8f80bd71ed3390032027da52f37
    container_format: bare
    disk_format: raw
    name: fedora-39-1.5
    state: present
    url: https://download.fedoraproject.org/pub/fedora/linux/releases/39/Cloud/x86_64/images/Fedora-Cloud-Base-39-1.5.x86_64.qcow2
  - checksum: "6193a49c545425f99d23f59ea792f79a7a6b2e3557fc2d3f6d42c3e5274061de"
    container_format: bare
    disk_format: raw
    name: centos-9-stream
    state: present
    url: https://cloud.centos.org/centos/9-stream/x86_64/images/CentOS-Stream-GenericCloud-9-20230605.0.x86_64.qcow2
keypairs:
  - name: sf-infra-key
    public_key: "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDHj3R7JGtLkSD9h+E6JNHGdZ+SStJx+wyQsE7DK41t+Au7mfTJb12zjxBO4OwzAJbVnudN86BPYI0aHuY7ZpZ8+yitcFOBxQdczcGNistIaOHNb7bp0aPpVTYkHEYo3IlsDgPYcMVsvwOpIIDfi8wSQo3p4FNTtOc9ulAeQ7UUl4uId7ILLGzpDhkRrb+hYetJw/e3Xkqz6BW/VFbw6Tb8DdgMGhNVflQNlPz1HB60zKxeoeRkrLg3lMO/LuFHr48MtWuQ4LR13fq/tw3XgzHIBU2LL107wTtZs3KqxdqEcs9+7gAaNtT9+rbMoQvF0E9viZn+vjHOAbfxgXUEsFt7"
networks:
  - external_network: public
    name: private-network
  - external_network: public
    name: oci-private-network
routers:
  - interfaces:
      - net: private-network
        portip: '192.168.242.1'
        subnet: private-subnet
    name: default-router
    network: public
  - interfaces:
      - net: oci-private-network
        portip: '192.168.254.1'
        subnet: oci-private-subnet
    name: oci-private-router
    network: public
security_groups:
  - name: common
    rules:
      - port: 22
      - port: -1
        protocol: icmp
  - name: web
    rules:
      - port: 80
      - port: 443
  - name: managesf
    rules:
      - port: 1883
      - port: 1884
      - port: 29418
      - port: 64738
      - port: 64738
        protocol: udp
  - name: internal
    rules:
      - port: 1
        port_range_max: 65535
        port_range_min: 1
        protocol: tcp
        remote_ip_prefix: "192.168.0.0/16"
      - port: 1
        port_range_max: 65535
        port_range_min: 1
        protocol: udp
        remote_ip_prefix: "192.168.0.0/16"
  - name: zuul-console
    rules:
      - port: 19885
  - name: zuul-weeder
    rules:
      - port: 9001
  - name: monitoring
    rules:
      - port: 9100
        protocol: tcp
        remote_ip_prefix: "{{ prometheus_private_ip }}/32"
      - port: 9101
        protocol: tcp
        remote_ip_prefix: "{{ prometheus_private_ip }}/32"
      - port: 9102
        protocol: tcp
        remote_ip_prefix: "{{ prometheus_private_ip }}/32"
      - port: 9104
        protocol: tcp
        remote_ip_prefix: "{{ prometheus_private_ip }}/32"
      - port: 9114
        protocol: tcp
        remote_ip_prefix: "{{ prometheus_private_ip }}/32"
      - port: 9100
        protocol: tcp
        remote_ip_prefix: "{{ prometheus_public_ip }}/32"
      - port: 9101
        protocol: tcp
        remote_ip_prefix: "{{ prometheus_public_ip }}/32"
      - port: 9102
        protocol: tcp
        remote_ip_prefix: "{{ prometheus_public_ip }}/32"
      - port: 9104
        protocol: tcp
        remote_ip_prefix: "{{ prometheus_public_ip }}/32"
      - port: 9114
        protocol: tcp
        remote_ip_prefix: "{{ prometheus_public_ip }}/32"
  - name: prometheus
    rules:
      - port: 7000
        protocol: udp
        remote_ip_prefix: "38.102.83.0/24"
      - port: 7000
        protocol: udp
        remote_ip_prefix: "38.129.56.0/24"
      - port: 7000
        protocol: udp
        remote_ip_prefix: "192.168.242.0/24"
      - port: 7000
        protocol: udp
        remote_ip_prefix: "169.60.49.226/32"
      - port: 7000
        protocol: udp
        remote_ip_prefix: "169.60.49.233/32"
  - name: hypervisor-oci
    rules:
      - port: 19885
      - port: 22022
        port_range_max: 65535
  - name: cs-k1s
    rules:
      - port: 9023
        remote_ip_prefix: "38.102.83.189/32"
  - name: prometheus-mail
    rules:
      - port: 25
        remote_ip_prefix: "{{ prometheus_public_ip }}/32"
  - name: elk
    rules:
      - port: 4731
      - port: 9200
        remote_ip_prefix: "192.168.242.0/24"
      - port: 9200
        remote_ip_prefix: "{{ prometheus_public_ip }}/32"
      - port: 8125
        protocol: udp
        remote_ip_prefix: "{{ prometheus_public_ip }}/32"
      - port: 9114
        remote_ip_prefix: "{{ prometheus_public_ip }}/32"
  - name: zookeeper
    rules:
      - port: 2281
        remote_ip_prefix: "{{ ibm_bm3_ip }}/32"
      - port: 2281
        remote_ip_prefix: "{{ ibm_bm4_ip }}/32"
  - name: zookeeper_exporter
    rules:
      - port: 9141
        remote_ip_prefix: "{{ prometheus_public_ip }}/32"
  - name: apache_exporter
    rules:
      - port: 9117
        remote_ip_prefix: "{{ prometheus_public_ip }}/32"
  - name: k8s-client
    rules:
      - port: 6443
      - port: 30000
servers:
  - boot_from_volume: yes
    flavor: v1-standard-2
    floating_ip: true
    image: rhel-9.3-x86_64-kvm
    key_name: sf-infra-key
    name: prometheus.monitoring.softwarefactory-project.io
    network: private-network
    security_groups:
      - common
      - monitoring
      - internal
      - web
      - prometheus
      - apache_exporter
    state: present
    volume_size: 80
  - boot_from_volume: yes
    flavor: v1-standard-4
    floating_ip: true
    image: centos-7-1907
    key_name: sf-infra-key
    name: elk.softwarefactory-project.io
    network: private-network
    security_groups:
      - common
      - monitoring
      - internal
      - elk
    state: present
  - boot_from_volume: yes
    flavor: v1-standard-4
    floating_ip: true
    image: centos-7-1907
    key_name: sf-infra-key
    name: managesf.softwarefactory-project.io
    network: private-network
    security_groups:
      - common
      - monitoring
      - internal
      - web
      - managesf
      - apache_exporter
    state: present
    volume_size: 20
  - boot_from_volume: yes
    flavor: v1-standard-2
    image: centos-7-1907
    key_name: sf-infra-key
    name: nodepool-builder.softwarefactory-project.io
    network: private-network
    security_groups:
      - common
      - monitoring
      - internal
    state: present
  - boot_from_volume: yes
    flavor: "8vcpu_16GB"
    floating_ip: true
    image: rhel-9.3-x86_64-kvm
    key_name: sf-infra-key
    name: k1s05.softwarefactory-project.io
    network: oci-private-network
    security_groups:
      - common
      - monitoring
      - internal
      - hypervisor-oci
    state: present
    volume_size: 100
  - boot_from_volume: yes
    flavor: "8vcpu_16GB"
    floating_ip: true
    image: rhel-9.3-x86_64-kvm
    key_name: sf-infra-key
    name: k1s03.softwarefactory-project.io
    network: oci-private-network
    security_groups:
      - common
      - monitoring
      - internal
      - hypervisor-oci
    state: present
    volume_size: 100
  - boot_from_volume: yes
    flavor: "4vcpus_8gb"
    floating_ip: true
    image: rhel-9.3-x86_64-kvm
    key_name: sf-infra-key
    name: k1s04.softwarefactory-project.io
    network: oci-private-network
    security_groups:
      - common
      - monitoring
      - internal
      - hypervisor-oci
      - cs-k1s
    state: present
    volume_size: 100
  - boot_from_volume: yes
    flavor: "4vcpus_8gb"
    floating_ip: true
    image: centos-7-1907
    key_name: sf-infra-key
    name: zk01.softwarefactory-project.io
    network: private-network
    security_groups:
      - common
      - monitoring
      - internal
      - zookeeper
    state: present
  - boot_from_volume: yes
    flavor: v1-standard-2
    image: centos-7-1907
    key_name: sf-infra-key
    name: zs.softwarefactory-project.io
    network: private-network
    security_groups:
      - common
      - monitoring
      - internal
    state: present
  - boot_from_volume: yes
    flavor: "4vcpus_8gb"
    floating_ip: true
    image: centos-7-1907
    key_name: sf-infra-key
    name: koji.softwarefactory-project.io
    network: private-network
    security_groups:
      - common
      - monitoring
      - internal
      - web
    state: present
    volume_size: 80
  - boot_from_volume: yes
    flavor: "1vcpu_2gb"
    floating_ip: true
    image: rhel-9.3-x86_64-kvm
    key_name: sf-infra-key
    name: image-builder.softwarefactory-project.io
    network: private-network
    security_groups:
      - common
      - monitoring
      - internal
      - zuul-console
      - zuul-weeder
    state: present
    volume_size: 50
  - boot_from_volume: yes
    flavor: "8vcpu_16GB"
    floating_ip: true
    image: centos-9-stream
    key_name: sf-infra-key
    name: microshift.softwarefactory-project.io
    network: private-network
    security_groups:
      - common
      - monitoring
      - internal
      - web
      - k8s-client
    state: present
    volume_size: 100
  - boot_from_volume: yes
    flavor: "8vcpu_16GB"
    floating_ip: true
    image: centos-9-stream
    key_name: sf-infra-key
    name: microshift-infra.softwarefactory-project.io
    network: private-network
    security_groups:
      - common
      - monitoring
      - internal
      - web
      - k8s-client
    state: present
    volume_size: 100
  - boot_from_volume: yes
    flavor: v1-standard-2
    floating_ip: true
    image: centos-7-1907
    key_name: sf-infra-key
    name: fedora.softwarefactory-project.io
    network: private-network
    security_groups:
      - common
      - monitoring
      - internal
      - elk
      - apache_exporter
      - web
    state: present
    volume_size: 40
  - boot_from_volume: yes
    flavor: v1-standard-2
    floating_ip: true
    image: centos-7-1907
    key_name: sf-infra-key
    name: centos.softwarefactory-project.io
    network: private-network
    security_groups:
      - common
      - monitoring
      - internal
      - apache_exporter
      - web
    state: present
    volume_size: 40
  - boot_from_volume: yes
    flavor: v1-standard-2
    floating_ip: true
    image: centos-7-1907
    key_name: sf-infra-key
    name: ansible.softwarefactory-project.io
    network: private-network
    security_groups:
      - common
      - monitoring
      - internal
      - web
    state: present
    volume_size: 40
  - boot_from_volume: no
    flavor: "4vcpus_8gb"
    image: centos-7-1907
    key_name: sf-infra-key
    name: ze01.softwarefactory-project.io
    network: private-network
    security_groups:
      - common
      - monitoring
      - internal
    state: present
  - boot_from_volume: no
    flavor: "4vcpus_8gb"
    image: centos-7-1907
    key_name: sf-infra-key
    name: ze02.softwarefactory-project.io
    network: private-network
    security_groups:
      - common
      - monitoring
      - internal
    state: present
  - boot_from_volume: no
    flavor: "4vcpus_8gb"
    image: centos-7-1907
    key_name: sf-infra-key
    name: ze03.softwarefactory-project.io
    network: private-network
    security_groups:
      - common
      - monitoring
      - internal
    state: present
  - boot_from_volume: no
    flavor: "4vcpus_8gb"
    image: centos-7-1907
    key_name: sf-infra-key
    name: ze04.softwarefactory-project.io
    network: private-network
    security_groups:
      - common
      - monitoring
      - internal
    state: present
  - boot_from_volume: no
    flavor: "4vcpus_8gb"
    image: centos-7-1907
    key_name: sf-infra-key
    name: ze05.softwarefactory-project.io
    network: private-network
    security_groups:
      - common
      - monitoring
      - internal
    state: present
  - boot_from_volume: no
    flavor: "4vcpus_8gb"
    image: centos-7-1907
    key_name: sf-infra-key
    name: ze06.softwarefactory-project.io
    network: private-network
    security_groups:
      - common
      - monitoring
      - internal
    state: present
  - boot_from_volume: no
    flavor: "4vcpus_8gb"
    image: centos-7-1907
    key_name: sf-infra-key
    name: ze07.softwarefactory-project.io
    network: private-network
    security_groups:
      - common
      - monitoring
      - internal
    state: present
  - boot_from_volume: no
    flavor: "1vcpu_1gb"
    image: centos-7-1907
    key_name: sf-infra-key
    name: zm01.softwarefactory-project.io
    network: private-network
    security_groups:
      - common
      - monitoring
      - internal
    state: present
  - boot_from_volume: no
    flavor: "1vcpu_1gb"
    image: centos-7-1907
    key_name: sf-infra-key
    name: zm02.softwarefactory-project.io
    network: private-network
    security_groups:
      - common
      - monitoring
      - internal
    state: present
  - boot_from_volume: no
    flavor: "1vcpu_1gb"
    image: centos-7-1907
    key_name: sf-infra-key
    name: zm03.softwarefactory-project.io
    network: private-network
    security_groups:
      - common
      - monitoring
      - internal
    state: present
  - boot_from_volume: no
    flavor: "1vcpu_1gb"
    image: centos-7-1907
    key_name: sf-infra-key
    name: zm04.softwarefactory-project.io
    network: private-network
    security_groups:
      - common
      - monitoring
      - internal
    state: present
  - boot_from_volume: no
    flavor: "1vcpu_1gb"
    image: centos-7-1907
    key_name: sf-infra-key
    name: zm05.softwarefactory-project.io
    network: private-network
    security_groups:
      - common
      - monitoring
      - internal
    state: present
  - boot_from_volume: no
    flavor: "1vcpu_1gb"
    image: centos-7-1907
    key_name: sf-infra-key
    name: zm06.softwarefactory-project.io
    network: private-network
    security_groups:
      - common
      - monitoring
      - internal
    state: present
  - boot_from_volume: no
    flavor: "1vcpu_1gb"
    image: centos-7-1907
    key_name: sf-infra-key
    name: zm07.softwarefactory-project.io
    network: private-network
    security_groups:
      - common
      - monitoring
      - internal
    state: present
  - boot_from_volume: no
    flavor: "1vcpu_1gb"
    image: centos-7-1907
    key_name: sf-infra-key
    name: zm08.softwarefactory-project.io
    network: private-network
    security_groups:
      - common
      - monitoring
      - internal
    state: present
subnets:
  - cidr: "192.168.242.0/24"
    dns_nameservers:
      - '1.1.1.1'
      - '8.8.8.8'
    gateway_ip: '192.168.242.1'
    name: private-subnet
    network_name: private-network
  - cidr: "192.168.254.0/24"
    dns_nameservers:
      - '1.1.1.1'
      - '8.8.8.8'
    gateway_ip: '192.168.254.1'
    name: oci-private-subnet
    network_name: oci-private-network
volumes:
  - device: /dev/vdb
    display_name: elk-data
    server: elk.softwarefactory-project.io
    size: 160
  - device: /dev/vdb
    display_name: nodepool-builder-data-2
    server: nodepool-builder.softwarefactory-project.io
    size: 200
  - device: /dev/vdb
    display_name: image-builder-data
    server: image-builder.softwarefactory-project.io
    size: 1000
  - device: /dev/vdb
    display_name: microshift-infra-data
    server: microshift-infra.softwarefactory-project.io
    size: 200
  - device: /dev/vdb
    display_name: logs-data
    server: fedora.softwarefactory-project.io
    size: 100
  - device: /dev/vdb
    display_name: centos-logs-data
    server: centos.softwarefactory-project.io
    size: 250
