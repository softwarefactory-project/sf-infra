# Code generated by dhall-to-yaml.  DO NOT EDIT.
image_cache_dir: "{{ ansible_user_dir }}/image_cache"
images:
  - checksum: "520d01c2f2e1ed24cb2f15a4325aa30773930a2961b5484a68cf11b4a415c512"
    container_format: bare
    disk_format: qcow2
    name: centos-7-1907
    url: https://cloud.centos.org/centos/7/images/CentOS-7-x86_64-GenericCloud-1907.qcow2
  - checksum: "72b6ae7b4ed09a4dccd6e966e1b3ac69bd97da419de9760b410e837ba00b4e26"
    container_format: bare
    disk_format: qcow2
    name: fedora-30-1.2
    url: https://download.fedoraproject.org/pub/fedora/linux/releases/30/Cloud/x86_64/images/Fedora-Cloud-Base-30-1.2.x86_64.qcow2
  - checksum: c86c119665866695a700a4ab523c774c64ed7e0dd9e6e89f5f032e0f03148a47
    container_format: bare
    disk_format: qcow2
    name: centos-8.0-1905
    url: https://jpena.fedorapeople.org/CentOS-8-GenericCloud-8.0.1905-22.x86_64.qcow2
  - checksum: e2cf1081645b1089f574918fb808b32d247169ec4ec1a13bca9e14a74df6530e
    container_format: bare
    disk_format: qcow2
    name: centos-8.1-1911
    url: https://cloud.centos.org/centos/8/x86_64/images/CentOS-8-GenericCloud-8.1.1911-20200113.3.x86_64.qcow2
keypairs:
  - name: sf-infra-key
    public_key: "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDHj3R7JGtLkSD9h+E6JNHGdZ+SStJx+wyQsE7DK41t+Au7mfTJb12zjxBO4OwzAJbVnudN86BPYI0aHuY7ZpZ8+yitcFOBxQdczcGNistIaOHNb7bp0aPpVTYkHEYo3IlsDgPYcMVsvwOpIIDfi8wSQo3p4FNTtOc9ulAeQ7UUl4uId7ILLGzpDhkRrb+hYetJw/e3Xkqz6BW/VFbw6Tb8DdgMGhNVflQNlPz1HB60zKxeoeRkrLg3lMO/LuFHr48MtWuQ4LR13fq/tw3XgzHIBU2LL107wTtZs3KqxdqEcs9+7gAaNtT9+rbMoQvF0E9viZn+vjHOAbfxgXUEsFt7"
networks:
  - external_network: public
    name: private-network
routers:
  - interfaces:
      - net: private-network
        portip: '192.168.240.1'
        subnet: private-subnet
    name: default-router
    network: public
security_groups:
  - name: common
    rules:
      - port: 22
      - port: -1
        protocol: icmp
  - name: web
    rules:
      - port: 80
      - port: 443
  - name: managesf
    rules:
      - port: 1883
      - port: 1884
      - port: 29418
      - port: 64738
      - port: 64738
        protocol: udp
  - name: internal
    rules:
      - port: 1
        port_range_max: 65535
        port_range_min: 1
        protocol: tcp
        remote_ip_prefix: "192.168.0.0/16"
      - port: 1
        port_range_max: 65535
        port_range_min: 1
        protocol: udp
        remote_ip_prefix: "192.168.0.0/16"
  - name: afs
    rules:
      - port: 8080
      - port: 8081
      - port: 8082
      - port: 8083
      - port: 8084
      - port: 4443
      - port: 4444
      - port: 4445
      - port: 4446
      - port: 4447
  - name: monitoring
    rules:
      - port: 9100
        remote_ip_prefix: "{{ bridge_public_ip }}/32"
        state: absent
      - port: 9100
        remote_ip_prefix: "{{ prometheus_public_ip }}/32"
      - port: 9104
        remote_ip_prefix: "{{ prometheus_public_ip }}/32"
  - name: rdo-trunk
    rules:
      - port: 3300
  - name: hound
    rules:
      - port: 6080
  - name: elk
    rules:
      - port: 4731
      - port: 4732
      - port: 9200
        remote_ip_prefix: "192.168.240.0/24"
      - port: 9200
        remote_ip_prefix: "{{ prometheus_public_ip }}/32"
      - port: 9200
        remote_ip_prefix: "38.102.83.141/32"
      - port: 5601
        remote_ip_prefix: "38.102.83.141/32"
  - name: opensearch
    rules:
      - port: 9200
        remote_ip_prefix: "38.102.83.136/32"
      - port: 9200
        remote_ip_prefix: "38.102.83.124/32"
  - name: logstash
    rules:
      - port: 9998
        remote_ip_prefix: "38.102.83.136/32"
      - port: 9997
        remote_ip_prefix: "38.102.83.124/32"
  - name: registry
    rules:
      - port: 53
      - port: 2379
      - port: 2380
      - port: 4001
      - port: 5000
      - port: 8443
      - port: 9090
      - port: 10250
      - port: 4789
        protocol: udp
      - port: 8053
        protocol: udp
  - name: rcn-share
    rules:
      - port: 4433
        protocol: tcp
        remote_ip_prefix: "38.145.32.0/22"
      - port: 4433
        protocol: tcp
        remote_ip_prefix: "38.102.83.0/24"
  - name: dlrn-db
    rules:
      - port: 3306
        protocol: tcp
        remote_ip_prefix: "54.82.121.165/32"
      - port: 3306
        protocol: tcp
        remote_ip_prefix: "3.87.151.16/32"
      - port: 3306
        protocol: tcp
        remote_ip_prefix: "38.102.83.226/32"
      - port: 3306
        protocol: tcp
        remote_ip_prefix: "38.102.83.175/32"
      - port: 3306
        protocol: tcp
        remote_ip_prefix: "66.187.233.202/32"
  - name: mta
    rules:
      - port: 25
  - name: mda
    rules:
      - port: 143
      - port: 993
servers:
  - auto_ip: true
    boot_from_volume: yes
    flavor: v1-standard-2
    image: centos-7-1907
    key_name: sf-infra-key
    name: mirror.regionone.vexxhost.rdoproject.org
    network: private-network
    security_groups:
      - common
      - monitoring
      - web
      - afs
    volume_size: 200
  - auto_ip: true
    boot_from_volume: yes
    flavor: v1-standard-2
    image: centos-8.0-1905
    key_name: sf-infra-key
    name: centos8-rpm-packaging-ci.rdoproject.org
    network: private-network
    security_groups:
      - common
      - monitoring
      - web
      - rdo-trunk
    volume_size: 100
  - auto_ip: true
    boot_from_volume: yes
    flavor: ci.m1.large
    image: centos-7-1907
    key_name: sf-infra-key
    name: rpm-packaging-ci.rdoproject.org
    network: private-network
    security_groups:
      - common
      - monitoring
      - web
      - rdo-trunk
    volume_size: 100
  - auto_ip: true
    boot_from_volume: yes
    flavor: v1-standard-4
    image: centos-7-1907
    key_name: sf-infra-key
    name: registry.rdoproject.org
    network: private-network
    security_groups:
      - common
      - monitoring
      - web
      - registry
    volume_size: 200
  - boot_from_volume: yes
    flavor: "4vcpus_8gb"
    floating_ips:
      - '38.129.56.158'
    image: centos-8-stream
    key_name: sf-infra-key
    name: quay.rdoproject.org
    network: private-network
    security_groups:
      - common
      - monitoring
      - web
    volume_size: 50
  - auto_ip: true
    boot_from_volume: yes
    flavor: v1-standard-4
    image: centos-8.0-1905
    key_name: sf-infra-key
    name: trunk-centos8.rdoproject.org
    network: private-network
    security_groups:
      - common
      - monitoring
      - web
      - rdo-trunk
    volume_size: 512
  - auto_ip: true
    boot_from_volume: yes
    flavor: v1-standard-4
    image: centos-7-1907
    key_name: sf-infra-key
    name: trunk-centos7.rdoproject.org
    network: private-network
    security_groups:
      - common
      - monitoring
      - web
      - rdo-trunk
    volume_size: 512
  - auto_ip: true
    boot_from_volume: yes
    flavor: v1-standard-2
    image: centos-7-1907
    key_name: sf-infra-key
    name: managesf.review.rdoproject.org
    network: private-network
    security_groups:
      - common
      - monitoring
      - web
      - managesf
      - internal
    volume_size: 40
  - boot_from_volume: yes
    flavor: v1-standard-2
    floating_ips:
      - '38.102.83.136'
    image: centos-7-1907
    key_name: sf-infra-key
    name: elk.review.rdoproject.org
    network: private-network
    security_groups:
      - common
      - monitoring
      - elk
      - internal
  - auto_ip: true
    boot_from_volume: yes
    flavor: v1-standard-2
    image: centos-7-1907
    key_name: sf-infra-key
    name: logserver.rdoproject.org
    network: private-network
    security_groups:
      - common
      - monitoring
      - web
      - hound
      - internal
    volume_size: 10
  - auto_ip: true
    boot_from_volume: yes
    flavor: v1-standard-1
    image: centos-8.1-1911
    key_name: sf-infra-key
    name: images.rdoproject.org
    network: private-network
    security_groups:
      - common
      - monitoring
      - web
      - rcn-share
    volume_size: 50
  - boot_from_volume: yes
    flavor: v1-standard-1
    floating_ips:
      - '38.102.83.227'
    image: centos-8.1-1911
    key_name: sf-infra-key
    name: www.rdoproject.org
    network: private-network
    security_groups:
      - common
      - monitoring
      - web
    volume_size: 10
  - auto_ip: true
    boot_from_volume: yes
    flavor: v1-standard-2
    image: centos-8.1-1911
    key_name: sf-infra-key
    name: dlrn-db.rdoproject.org
    network: private-network
    security_groups:
      - common
      - monitoring
      - dlrn-db
    volume_size: 60
  - boot_from_volume: yes
    flavor: "4vcpus_8gb"
    floating_ips:
      - '38.102.83.14'
    image: centos-8-stream
    key_name: sf-infra-key
    name: opensearch.rdoproject.org
    network: private-network
    security_groups:
      - common
      - monitoring
      - web
      - opensearch
      - internal
    volume_size: 50
subnets:
  - cidr: "192.168.240.0/24"
    dns_nameservers:
      - '1.1.1.1'
      - '8.8.8.8'
    gateway_ip: '192.168.240.1'
    name: private-subnet
    network_name: private-network
volumes:
  - device: /dev/vdb
    display_name: centos8-rpm-packaging-swap
    server: centos8-rpm-packaging-ci.rdoproject.org
    size: 8
  - device: /dev/vdb
    display_name: registry-docker
    server: registry.rdoproject.org
    size: 100
  - device: /dev/vdc
    display_name: registry-data
    server: registry.rdoproject.org
    size: 1024
  - device: /dev/vdb
    display_name: quay_db
    server: quay.rdoproject.org
    size: 50
  - device: /dev/vdc
    display_name: quay_data
    server: quay.rdoproject.org
    size: 1024
  - device: /dev/vdb
    display_name: trunk-centos8-swap
    server: trunk-centos8.rdoproject.org
    size: 16
  - device: /dev/vdb
    display_name: trunk-centos7-swap
    server: trunk-centos7.rdoproject.org
    size: 8
  - device: /dev/vdb
    display_name: elk-data
    server: elk.review.rdoproject.org
    size: 1000
  - device: /dev/vdb
    display_name: logs-data
    server: logserver.rdoproject.org
    size: 1000
  - device: /dev/vdc
    display_name: logs-data02
    server: logserver.rdoproject.org
    size: 1000
  - device: /dev/vdd
    display_name: logs-data03
    server: logserver.rdoproject.org
    size: 1000
  - device: /dev/vdb
    display_name: images-data
    server: images.rdoproject.org
    size: 1000
  - device: /dev/vdb
    display_name: opensearch_data
    server: opensearch.rdoproject.org
    size: 1024
