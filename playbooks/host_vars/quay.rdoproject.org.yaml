---
rhel_release: 9.4
container_images:
  quay: "quay.io/projectquay/quay:3.10.10"
  postgresql: "quay.io/software-factory/postgres:13.21-alpine3.22"
  clair: "quay.io/projectquay/clair:4.7.2"
  redis: "quay.io/software-factory/redis:7.2.9-alpine3.21"

# For quay after migrating from floating ip to public network interface
# NOTE: here is public ip address for Quay RDO.
redis_host: 38.102.83.197
postgresql_host: 38.102.83.197
clair_host: 38.102.83.197

partitions:
  quay:
    lvm: True
    vg_name: 'vgimage'
    lv_name: 'image'
    devices:
      - /dev/vdc
      - /dev/vdd
      - /dev/vde
    mountpoint: '/var/data/'
  db:
    lvm: False
    device: vdb
    mountpoint: '/var/lib/pgsql'

swap_file: /swap
swap_size: 2048

# NOTE: We disable clair service due it was using a lot IOPS
# on scanning the image content.
enable_clair: false

ssl_cert_options:
  cert1:
    email: "softwarefactory-operations-team@redhat.com"
    domain: "quay.rdoproject.org"

# NOTE: The clair service seems to work without generating PSK
# key. It might be a situation that documentation is outdated.
# NOTE: We add that key after deployment by using "config secret"
# param - its defined in quay.yml file when initial_config is set to true.
# refreshed: 2021-08-05
clair_psk_key: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  31333662653835323863613337383131616561323464303333643561643439633936303838616235
  6533316132623436323031306662313435386235343866610a393663306163363762303039616564
  31643939306438303332663034316430316534346139616233623532363733363938636139386337
  6237633761663934320a633963396333626234333166306364653634643530646265343036383463
  30366564323832643331346165373566393832646363396133363334343138646132
# refreshed: 2021-07-14
postgresql_user: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  62633962656538646662383063666561333865633837326436623836316133643761663966396631
  3465313763356536303065333339336436393938373535320a643530653036666430323234363832
  62366134613338663566313663633033356237623731623038663035663133623734643732373130
  3163383236306331330a633236646461616663323935356234346432383261326238323430316138
  6231
# refreshed: 2021-07-14
postgresql_password: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  33623634333433653330376135663538383030346565663862333266313636353832373066303566
  6431306539646235346630626366333731653735646462320a376264646564626535353263303165
  38303132643530343466653266333033656135353134333035333839366662396138623130313837
  6236363464356662610a653635376432343462346566653137623838626164366264326638356364
  31326430653335386466396262303863363533343765613033626138346333303138663235373934
  3962623439623133633835336433346138636438343132626262
# refreshed: 2021-07-14
postgresql_admin_password: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  31383362336237343263613365356433636566303137616433333033653963623239306638366465
  6566646437336362343363383239373166356135636166310a393964346136666135666166346231
  64363138366532653939343466343562633862353365666638343634336537333432613334366639
  3563323033333732300a616332656230323333613663373439383532656534343032663236393233
  63633732393063656533646632303631376365613530313635616463623065663865666636353838
  3561316435613934316530636639343939393938363430386135
# refreshed: 2021-07-14
redis_password: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  33333233333164643761643030643465346632303035336239666632303532653533393039343566
  6262366132636334333631643737393164333264333834330a666564636530313830613630386230
  65313462306663333537653332636465376639623666636462303433373033326630396261333638
  3231346539333232650a393461393930376631323139636533653461623039356336396262326133
  62663037373230613563636664666663633034653138326436666264393833386133653138633033
  3565656462343932383431393232313037616664356631353837
# refreshed: 2021-07-14
database_secret_key: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  62623236633530363864353433663364393361383765666435313262646437653965656338336630
  3630623939363163613233343631646139336530633536650a393335356364613633366639383933
  65633463303662353362313433376233633632333738623938356234303963636431346338376666
  3734306239373634300a636665376131663834326461386139303434313936363433373566343332
  39323433643236383166316261653361333637613166333436313232643465353364623664396361
  3339323637623131613539336463343234386135656230613631
# refreshed: 2021-09-30
secret_key: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  65653833646434323765666465663834326265613031646238353761626631633835303534393133
  3666636632353033623632343534363930653963663864320a663965633666336537323062346461
  65626336393131353661366237613066326337643638373739356433316466663331646463616162
  6161366433343130640a333335313331666231656363353763353833323162613565376661623834
  35306636653930323366383361373166323935363237663539346230653534383032313333366662
  6261626464303239393634373734373037373838643336383561

# NOTE: Admin password needs to be at least 8 chars
# NOTE: the email address needs to be unique
# NOTE: To generate token for an organization, after creating a superuser
# account, login into the Quay as this user, create new organization: "config",
# then inside the organization "config", create new application "admin_token",
# with "Administer Organization", "Administer Repositories", "Create Repositories",
# "View all visible repositories", "Read/Write to any accessible repositories" and
# "Administer User" permissions.
#
# Structure looks like:
#  <user>:
#    email: <unique email address>
#    password: <password>
#    token: <token that is created manually in the application that is in config organization with administrator privileges>
quay_users:
  admin:
    email: release@softwarefactory-project.io
    # refreshed: 2024-10-25
    password: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      31306533613239303136346566313031316361326663326461333931343936303964343636346134
      6661366162626465363864633830396233323661393964630a303661666266643364353665616164
      34636232613639663831386633643237633039623639633736623436356535333866666663333335
      6464343037303638300a363339333637306535643830623863383131303231306636366633343366
      30663234613437633330636365623639626132373031653930376464363333323433336532653730
      3830333662343862613432396561376266313836313265343135
    # NOTE: The bootstrap token is only valid for few hours after boostrap
    # the Quay service. In our case, we create an application inside the
    # "software-factory" organization, with name "superapp" that later will be
    # available in /var/data/quay/config/admin_token file.
    # refreshed: 2024-10-25
    token: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      35626231613430353133646434356232656263356530383436343333633564653761313534386436
      6165366536626565393464656137333233643836313065370a303963643765386438646632356362
      37353537316632303032333534613132343232633333396166663366303162646661306339623264
      6630653561663466360a313539616139643763393335346432653162316364623236373539383961
      35613863643738613030336665663230626364653861623934646264373366633739636361373661
      3437386537633335646532623534303162666335376235623731
  sf:
    email: softwarefactory-operations-team@redhat.com
    # refreshed: 2024-10-25
    password: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      35616165393736643764646366376331306539363562313066323030376661336138303838396333
      6564323261326463313530336564316363613836303461300a393037373261336563386132633235
      30316161336634376338383030636235353930353030346166613330353561353338383734353838
      6162643338643831650a333132633135663965616566313035626565636161653163643965666364
      32623363613966663036396266663365346130326438316233616231303062363939373765366336
      3666353138383234373230343439326265613130323162313037
    token: ""
  tripleo:
    email: tripleo@redhat.com
    # refreshed: 2024-11-18
    password: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      39616665616362623961363035336566663836323661663762346334643830313733666638396138
      3963616335326439636232663139623033313664386538650a643165396164346439633832303962
      36393061306532376331313638366438316266336464336230343165306637313239643332336634
      3031623934613935300a633437353662643961643365393133386565626238373134663462656533
      65653061613436613332303863353335666463373736653234393833373039383430356361396330
      6538316230663735346364393133623237386464396161633538
    # refreshed: 2024-10-25
    token: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      36356665643336356535306533333866313564393135386165396565363937333435313531623430
      3136623437633432373162396638613261373161313966640a353730373663353564373837383433
      65646361313230363234396238663636356163636437646431383634363833386430393836633665
      3362333334316261320a643936386338313538386436376165346133666161656534383563626135
      33303233653065353332356538333865333532626434366333333166386136323336636362643638
      3938336135396238623736663761343338353934663833313232
  zuul:
    email: zuul@softwarefactory-project.io
    # refreshed: 2024-10-25
    password: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      36346339376662643263616530353966636361623436306262353531393965323635343061303036
      3330373365376466613438326535396537666233323364360a353439666433316534386531666136
      35343563393162346162336637623833373038613336303363313630323661383732326462653066
      3437333964343039620a656265393766616632343832353937313962353938373838396133393761
      36653635626166613662316262393930323463626136616334323635353162326465643631353166
      3939633933613239306531623361316431633833333366323364
    token: ""

### Quay container image pruner ###
quay_enable_prune: true

### Automatization organization creation in Quay registry ###
# NOTE: First step is to create new organization in the project
# Structure looks like:
#   <project>
#     - name: my-new-organization
#       token: ""
#       prune_days: <retention days>
#
# When its merged, modify the new created organization and add the
# pruner application token.
# Structure looks like:
#   <project>
#     - name: my-new-organization
#       token: <encrypted with ansible vault pruner application token>
#       prune_days: <retention days>
#
# NOTE: to create that token, create an "application" inside the organization,
# for example: in tripleomastercentos9, go to the application,then create a
# new one with name 'pruner', then in the new application "Generate token"
# and assign roles: "Administer Repositories" and "View all visible repositories".
# Later that token would be encrypted by the infra team with Ansible vault tool.
quay_api_url: https://quay.rdoproject.org/api/v1
quay_organizations:
  tripleo:
    - name: tripleomastercentos9
      # refreshed: 2024-10-31
      token: !vault |
        $ANSIBLE_VAULT;1.1;AES256
        33313361663263663235333738613532653237393130373938623861666238666230316230383139
        3831653864633634643733313266646234623731323339380a646363336466356338323036383434
        33386437303735663832336462363162313639656131643461353161373831383861366239653737
        3533383930643936330a343863653633633630343432666538326566383632376333356136303133
        32306562376364356438383231313763616632356337353762306638366337643565653262396230
        6465386332346438626431373262346136323130396332366162
      prune_days: 7
    - name: tripleowallabycentos9
      # refreshed: 2024-10-31
      token: !vault |
        $ANSIBLE_VAULT;1.1;AES256
        35623835363466383162303638393839623936643933613432343539613736373938616564636166
        3664383435666230333934366134303364666535636663620a643033306530303061656135313662
        63326333363364363662333433306639333536353337373936383664626636333061613563383732
        3866343862353431650a333264633439626566656262616665313631396138613637313031326632
        65326162306638306236366163323165656630356564643436376366623264656365333437396638
        3534633364386239396331653364323566653130646634663636
      prune_days: 7
    - name: tripleozedcentos9
      # refreshed: 2024-10-31
      token: !vault |
        $ANSIBLE_VAULT;1.1;AES256
        32353863316263663531613232636630633831383962333337326161663064393631303535353038
        3233653662313839396434323836336434393234336662380a396665353065663735656661363034
        64613163393935313938663436616366356339373261646635396535643532356264633362306231
        3966356538656133620a616433393032666333646435343265363931626265343762626331383136
        62663937316139373631306263376634613463333336613265373537646537323165366466613665
        3036373861643931626130643334383637663830353965383536
      prune_days: 7
    - name: openstack-k8s-operators
      # refreshed: 2024-10-31
      token: !vault |
        $ANSIBLE_VAULT;1.1;AES256
        33653835323730613434303732616234663033623235643131393539396364663130363964623031
        3132353663636361623339316639353364356434326161370a356431616236666362356230653930
        31313639303564326666303764656430326139623964653066306634306363386539623934363834
        3465353838373634340a326461626431646565303635393833663563376433306438633935323762
        61363062303035316539353738626166653532643232646563643738373965366366616261623064
        3234313038616430353966343230636437326632336662333734
      prune_days: 7
    - name: podified-main-centos9
      # refreshed: 2024-10-31
      token: !vault |
        $ANSIBLE_VAULT;1.1;AES256
        62623361306632636530626431363238636366666461363631633334343137393136646634663166
        3663666632363366643438346534643131653937376561340a633430633234636234643936643930
        66333964396161313337303765623432356132366330323337613465316464643265366361616333
        3462643236633961330a306661343034643537646264373061313962383866313931396138376164
        36356663613137663737326132663064323462663664613030653665396565623965393331366564
        3064663164383832616531633237613661663930393030336362
      prune_days: 7
    - name: podified-master-centos9
      # refreshed: 2024-10-31
      token: !vault |
        $ANSIBLE_VAULT;1.1;AES256
        61393332653635396564333232373766646362363561623033363764343533613231303465316533
        3934333063393030333264393139303363393138626534320a323462326330373530616132383862
        30613161376435633830383766313530333463386138393162623161386537353532646337616432
        3065353762313338660a316466646463326432306566306535396161663239646637313839356238
        33353666373332346466363164653166623137393663656633326165313761363863306135303930
        6133323361616533623139656634386135633431633862336630
      prune_days: 7
    - name: podified-zed-centos9
      # refreshed: 2024-10-31
      token: !vault |
        $ANSIBLE_VAULT;1.1;AES256
        63323535626462393464393232343966313830303630393662313165666131363366366133333762
        6564323866383831356564343435646662363835386662380a396331663337313238393430303466
        63393932633462616132336661633461336265363461663664326564626638636364653334313633
        6136646362333234360a373632323238646534316565363935383365366233356538616531626366
        63383265313664396537343835363366363562343034613663396434313764613238393666653831
        3763333262396163663237383234383763376261323633366335
      prune_days: 7
    - name: podified-antelope-centos9
      # refreshed: 2024-10-31
      token: !vault |
        $ANSIBLE_VAULT;1.1;AES256
        34333134613966373934316532356661303237313661303935303935313963663765393366633430
        3366656564376137346630663339373362663737363230350a353963306338633236303436333835
        61323631393431336163313035303738623431366366643065353666353835396136313232646533
        3861363731333939340a653130303734666336336237623965313735333434656566616332313461
        65666234663335346265313931306366313531336530653334333135366233356433636638633961
        3335333562336535393231336136356432313631393565623331
      prune_days: 7
    - name: podified-master-centos10
      # refreshed: 2025-04-30
      token: !vault |
        $ANSIBLE_VAULT;1.1;AES256
        36316361303639653332396335633635353139376264663530363734623331616561626637326431
        6363323061313930313336356165393435383234613462630a636563653039623564376534373635
        31653861663538323536623665366630626431643930623130623966346562353830393932633130
        6630313937316264300a663161393838623935313365306264663336353838623762343736656332
        65623266323166306666343335356330323239613364303939326165643962346634386464393163
        3064633234633130353532333431353939663536373334613034
      prune_days: 7

# List comes from: https://github.com/rdo-infra/rdo-dashboards/blob/master/feed-dashboard-dlrnapi.py#L62
quay_pruner_dlrn_endpoints:
  - api-centos9-master-uc
  - api-centos9-dalmatian
  - api-centos9-caracal
  - api-centos9-bobcat
  - api-centos9-antelope
  - api-centos9-zed
  - api-centos9-yoga
  - api-centos9-wallaby
  - api-centos10-master-uc

# List comes from: https://github.com/rdo-infra/ansible-role-dlrn/blob/master/files/run-purge.sh#L30
quay_pruner_extended_keeplist:
  - consistent
  - current-passed-ci
  - current-tripleo
  - previous-current-tripleo
  - current-tripleo-rdo
  - previous-current-tripleo-rdo
  - puppet-passed-ci
  - current-tripleo-rdo-internal
  - tripleo-ci-testing
  - promoted-components
  - component-ci-testing
  - podified-ci-testing
  - current-podified
  - current-ceph
