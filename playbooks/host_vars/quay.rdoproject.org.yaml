---
partitions:
  quay:
    lvm: True
    vg_name: 'vgimage'
    lv_name: 'image'
    devices:
      - /dev/vdc
      - /dev/vdd
    mountpoint: '/var/data/'
  db:
    lvm: False
    device: vdb
    mountpoint: '/var/lib/pgsql'

swap_file: /swap
swap_size: 2048

# NOTE: We disable clair service due it was using a lot IOPS
# on scanning the image content.
enable_clair: false

container_images:
  quay: "quay.io/projectquay/quay:v3.10.6"
  postgresql: "quay.io/software-factory/postgres:13.12-alpine3.18"
  clair: "quay.io/projectquay/clair:4.7.2"
  redis: "quay.io/software-factory/redis:7.2.0-alpine3.18"

ssl_cert_options:
  cert1:
    email: "softwarefactory-operations-team@redhat.com"
    domain: "quay.rdoproject.org"

# NOTE: The clair service seems to work without generating PSK
# key. It might be a situation that documentation is outdated.
# NOTE: We add that key after deployment by using "config secret"
# param - its defined in quay.yml file when initial_config is set to true.
clair_psk_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          31333662653835323863613337383131616561323464303333643561643439633936303838616235
          6533316132623436323031306662313435386235343866610a393663306163363762303039616564
          31643939306438303332663034316430316534346139616233623532363733363938636139386337
          6237633761663934320a633963396333626234333166306364653634643530646265343036383463
          30366564323832643331346165373566393832646363396133363334343138646132

postgresql_user: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          62633962656538646662383063666561333865633837326436623836316133643761663966396631
          3465313763356536303065333339336436393938373535320a643530653036666430323234363832
          62366134613338663566313663633033356237623731623038663035663133623734643732373130
          3163383236306331330a633236646461616663323935356234346432383261326238323430316138
          6231
postgresql_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          33623634333433653330376135663538383030346565663862333266313636353832373066303566
          6431306539646235346630626366333731653735646462320a376264646564626535353263303165
          38303132643530343466653266333033656135353134333035333839366662396138623130313837
          6236363464356662610a653635376432343462346566653137623838626164366264326638356364
          31326430653335386466396262303863363533343765613033626138346333303138663235373934
          3962623439623133633835336433346138636438343132626262
postgresql_admin_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          31383362336237343263613365356433636566303137616433333033653963623239306638366465
          6566646437336362343363383239373166356135636166310a393964346136666135666166346231
          64363138366532653939343466343562633862353365666638343634336537333432613334366639
          3563323033333732300a616332656230323333613663373439383532656534343032663236393233
          63633732393063656533646632303631376365613530313635616463623065663865666636353838
          3561316435613934316530636639343939393938363430386135
redis_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          33333233333164643761643030643465346632303035336239666632303532653533393039343566
          6262366132636334333631643737393164333264333834330a666564636530313830613630386230
          65313462306663333537653332636465376639623666636462303433373033326630396261333638
          3231346539333232650a393461393930376631323139636533653461623039356336396262326133
          62663037373230613563636664666663633034653138326436666264393833386133653138633033
          3565656462343932383431393232313037616664356631353837
database_secret_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          62623236633530363864353433663364393361383765666435313262646437653965656338336630
          3630623939363163613233343631646139336530633536650a393335356364613633366639383933
          65633463303662353362313433376233633632333738623938356234303963636431346338376666
          3734306239373634300a636665376131663834326461386139303434313936363433373566343332
          39323433643236383166316261653361333637613166333436313232643465353364623664396361
          3339323637623131613539336463343234386135656230613631
secret_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          65653833646434323765666465663834326265613031646238353761626631633835303534393133
          3666636632353033623632343534363930653963663864320a663965633666336537323062346461
          65626336393131353661366237613066326337643638373739356433316466663331646463616162
          6161366433343130640a333335313331666231656363353763353833323162613565376661623834
          35306636653930323366383361373166323935363237663539346230653534383032313333366662
          6261626464303239393634373734373037373838643336383561

# NOTE: Admin password needs to be at least 8 chars
# NOTE: the email address needs to be unique
# NOTE: To generate token for an organization, after creating a superuser
# account, login into the Quay as this user, create new organization: "config",
# then inside the organization "config", create new application "admin_token",
# with "Administer Organization", "Administer Repositories", "Create Repositories",
# "View all visible repositories", "Read/Write to any accessible repositories" and
# "Administer User" permissions.
#
# Structure looks like:
#  <user>:
#    email: <unique email address>
#    password: <password>
#    token: <token that is created manually in the application that is in config organization with administrator privileges>
quay_users:
  admin:
    email: release@softwarefactory-project.io
    password: !vault |
              $ANSIBLE_VAULT;1.1;AES256
              65653031626164613738333431623632343433323762633139653435636138333334663233373435
              6465306163303935616438373331383161343734326335350a386531373161626136383961323063
              33353364643061313636333765326663343831316266386234353239343534306566363238303132
              3533393062613731650a653666383938373135326266356136643065386337386534633630333662
              35653438333538646464633537396133303334653563626431326433323231653737353565366566
              3261386434303166316334383666376634613734306539623361
    # NOTE: The bootstrap token is only valid for few hours after boostrap
    # the Quay service. In our case, we create an application inside the
    # "software-factory" organization, with name "superapp" that later will be
    # available in /var/data/quay/config/admin_token file.
    token: !vault |
           $ANSIBLE_VAULT;1.1;AES256
           39323566353061326430373931616433613735323734393137333933636433663036616432643464
           3135373337343565333936303262666131346534663939320a393562663738633036363263663534
           39356636313463303032633663373461633134383239393939616539356634373037363338616639
           3236363739303238630a663830643338616564343334653431653338343064643535363030303665
           36666637373165633136646166326465313638626632383338363036356337323764626435653931
           6533316334313737663261346464383931356635373336353934
  sf:
    email: softwarefactory-operations-team@redhat.com
    password: !vault |
              $ANSIBLE_VAULT;1.1;AES256
              32373836306633646465653031393561613764353232313232366632623263636631323064346134
              6637656163633835333839353866316263303361623365340a313363653030323161353063643037
              34363335376564626166356231616534616564343331376531316239663137336364643036646164
              3036356162653533660a626332316662396561653336646430626534326562336433386435336338
              33663432323361373863376330616664663239633631636365313237643538326261663035626265
              3535326335346363353238316666393234616164346664626566
    token: ""
  tripleo:
    email: tripleo@redhat.com
    password: !vault |
              $ANSIBLE_VAULT;1.1;AES256
              61313461656165323736333935396536396265633066383539333038313230386538373332353637
              3162343433303066643666313736633236376563323765310a653764616162636364323861343733
              35353566383564393538613164323761343562393963373664663836343738663736326666643064
              3633366435396339350a623363613333326263356536376361323738313133303261336531376566
              61313432373166356330303938653061663531623966656263343037616430323263316666333732
              3134383637633139663666353134623066306130326436643861
    token: !vault |
           $ANSIBLE_VAULT;1.1;AES256
           64666565663663346232663238313065396539373133643036303530373662356633353861633062
           3536333533343166653563376337663536623161653432630a666432366161363931333431633939
           66616631333766653966396232316536373032646230666266663863613061343761646539646136
           6136643962616264300a626533626538353838616464396137646565343639616364336537636661
           35616338633764343465326436633531356437363861356135313563643035663063383637366662
           3465666134363962393434636363333435323839356339323965
  zuul:
    email: zuul@softwarefactory-project.io
    password: !vault |
              $ANSIBLE_VAULT;1.1;AES256
              65396130656266613164613864626564373366646664363732656336636134613065623264626231
              6265363263326634643738616537613535393631333263360a393665363137643031356633626634
              34636435346331653731303434636166623733323630393232326666653337313931383037386431
              6661373437663735640a346432316561336265343435353836393037626435656266646663343033
              66333737396138353839343931383861363162393934363030366261366333623333623935623934
              6439323961663966396563623136316132613731373161653463
    token: ""

### Quay container image pruner ###
quay_enable_prune: true

### Automatization organization creation in Quay registry ###
# NOTE: First step is to create new organization in the project
# Structure looks like:
#   <project>
#     - name: my-new-organization
#       token: ""
#       prune_days: <retention days>
#
# When its merged, modify the new created organization and add the
# pruner application token.
# Structure looks like:
#   <project>
#     - name: my-new-organization
#       token: <encrypted with ansible vault pruner application token>
#       prune_days: <retention days>
#
# NOTE: to create that token, create an "application" inside the organization,
# for example: in tripleomastercentos9, go to the application,then create a
# new one with name 'pruner', then in the new application "Generate token"
# and assign roles: "Administer Repositories" and "View all visible repositories".
# Later that token would be encrypted by the infra team with Ansible vault tool.
quay_api_url: https://quay.rdoproject.org/api/v1
quay_organizations:
  tripleo:
    - name: tripleomastercentos9
      token: !vault |
             $ANSIBLE_VAULT;1.1;AES256
             30643364316137323665316134656465363432636531306635653462613265336637333533303234
             3764386662323165663161323466396139366136333663620a663331333934666532333033626363
             39623139323938643931333831623433306332663434626435646163663663653731643536353631
             3066613664313238360a336263623631623764643131333832386431633835356431303161343161
             66306133303866336539616431616132306230326435643864646537396662366436633165346632
             3434643939343035636532653633333130393664633534306637
      prune_days: 7
    - name: tripleotraincentos8
      token: !vault |
             $ANSIBLE_VAULT;1.1;AES256
             64386461363064336536396362656132623736353534613237323131343130323231383931616139
             3533656330306462616236306433336439346630396361620a636131323537633064356133303961
             30633734656662303333303536393966333033373666303261346237386561306631346232613535
             6536636565313536300a383363346561633230356662613938326230376365653835653330383434
             65373733303266666333386435656665336336386365666665643830326263633464363463373564
             6636623936316336636533333939313966313839336662656164
      prune_days: 7
    - name: tripleowallabycentos9
      token: !vault |
             $ANSIBLE_VAULT;1.1;AES256
             32666331626262643133323662353164636637626139386161396365353162366333613034353233
             3466336637353133643134356636396136356337396636310a393261623862353066373666663830
             31343163326236646461653035316164393732303561353861386262353364663631306332646137
             3630313631353239370a656234363465336461646438656366346364323432613636663139373165
             62646163336233363636633063653536373639626661306661316465623562326239613933613035
             3731643533316235616532323462386330643932646536613431
      prune_days: 7
    - name: tripleowallabycentos8
      token: !vault |
             $ANSIBLE_VAULT;1.1;AES256
             32376331353763663230346232386134303538646537643861643332656634663833663337353831
             6239326666653439346636616536643738626535323262610a656364333464666137643639353636
             34313539373431356362323661643364656530363062613832366633303631313637336361336330
             3738303361316233330a656166613961313633653039633533343763306237643236323236353962
             66633130316562343566633931353330303636323336396433336438666564646537336231376264
             3061396435643231326630616134313135653265643832343839
      prune_days: 7
    - name: tripleozedcentos9
      token: !vault |
             $ANSIBLE_VAULT;1.1;AES256
             31396664613133303634616363346264366336643537336636363463636137613532343035623631
             6535376463643637646535366161376232656637393437610a646639366534613236313664313632
             31663733643031353834366362646638613338643131623033333434643139646236656263633537
             6336393535386233370a636432666135373062333466353138633665626464393938323063333763
             35323331626530363731376434393866336462373937613233343433633564373137386230366233
             6331353739353538623038376435306536393531663635343534
      prune_days: 7
    - name: openstack-k8s-operators
      token: !vault |
             $ANSIBLE_VAULT;1.1;AES256
             63646637313538613763623539663930633030356666376438323434366136313265653163386261
             3437363133326561323437643330333564653163396262320a313834343531633833623230663732
             39393231653961646166303865663634323537373531336636636638663737356532643130653762
             6330363162633931630a353363383561653566656230343237623438376364376131363365646361
             36643866363138353130306230613932316437643566336339643865333165666338316538326661
             3763653166613830303434633334643739386433313431663931
      prune_days: 7
    - name: podified-main-centos9
      token: !vault |
             $ANSIBLE_VAULT;1.1;AES256
             39336264356632306661363366626665656163366332303666323633333136666334613139333964
             3732646535333131633830333632343030663265613238360a393337303236376437643164653733
             38643165356462613962356538383033303538316232646262353933316136666363616461643161
             3432636464366330650a363462636561373234373036313961306262326139613165383335366661
             66313834313934653635613834633631336264396131643966323764653866303061316665306630
             6437316338663137346333363861616231396537616135666265
      prune_days: 7
    - name: podified-master-centos9
      token: !vault |
             $ANSIBLE_VAULT;1.1;AES256
             30393234313530373764336630663839656461613264326231313035613435346533616565336563
             6461343164333862346364333133383462653332643039320a353830333464346565626431616464
             30393266353666366564313664346632396238363938356337316562313736383230326539653865
             3861613234636136620a333237633735623735646333386232656437653235613434663335353335
             32326666396261646563346335316632326238366664336338353339323065313463363966383535
             3866646261643833386634623765336635666565333465356335
      prune_days: 7
    - name: podified-zed-centos9
      token: !vault |
             $ANSIBLE_VAULT;1.1;AES256
             38363233613866323036313432336436666363313934383238336466343938313561336233336563
             3462616464313233636131353566343631636261616539330a333533623631353161376136613364
             39343936636130313738316264643532383933613061383763636361353233653832316562386633
             3562303337313463360a653536303731653761326334313830666162626534346434306165363532
             66396137633462356464623965303536383961343461353731616538653865396239353262383630
             3830656264623139616533613438383731366335663062393066
      prune_days: 7
    - name: podified-antelope-centos9
      token: !vault |
             $ANSIBLE_VAULT;1.1;AES256
             30336231306530386138363139353730396361336434393863393230393037383461666131633463
             6562663935366437336661363135646433353661623765640a383837636562643761313537376363
             31346666346338653962663365393566626330303838343539393064653831646139616639646234
             3363643736303335310a633233353563393034356161336239633439303365373063376633646561
             32653939363237323938366638666266333565303034633739393039393364356665623266656230
             6135623366363965633765663166333230393432656635643134
      prune_days: 7

quay_pruner_dlrn_endpoints:
  - api-centos9-antelope
  - api-centos9-bobcat
  - api-centos9-master-uc
  - api-centos8-wallaby
  - api-centos9-wallaby
  - api-centos8-yoga
  - api-centos9-yoga
  - api-centos9-zed

quay_pruner_extended_keeplist:
  - current-tripleo
  - current-tripleo-rdo
  - current-tripleo-rdo-internal
  - tripleo-ci-testing
  - promoted-components
  - component-ci-testing
  - previous-current-tripleo
  - current-ceph
  - current-podified
  - podified-ci-testing
